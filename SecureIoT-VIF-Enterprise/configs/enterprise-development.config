# Configuration Enterprise Development pour SecureIoT-VIF
# Configuration pour le développement avec sécurité Enterprise mais debug activé

#
# Compiler options
#
CONFIG_IDF_CMAKE=y
CONFIG_IDF_TARGET_ESP32=y
CONFIG_IDF_TARGET="esp32"
CONFIG_IDF_FIRMWARE_CHIP_ID=0x0000

#
# Bootloader config
#
CONFIG_BOOTLOADER_COMPILER_OPTIMIZATION_DEBUG=y
CONFIG_BOOTLOADER_LOG_LEVEL_DEBUG=y
CONFIG_BOOTLOADER_LOG_LEVEL=4
CONFIG_BOOTLOADER_VDDSDIO_BOOST_1_9V=y
CONFIG_BOOTLOADER_REGION_PROTECTION_ENABLE=y
CONFIG_BOOTLOADER_WDT_ENABLE=y
CONFIG_BOOTLOADER_WDT_TIME_MS=9000
CONFIG_BOOTLOADER_APP_ANTI_ROLLBACK=
CONFIG_BOOTLOADER_SKIP_VALIDATE_IN_DEEP_SLEEP=y

#
# Security features - Enterprise Development
#
CONFIG_SECURE_BOOT=
CONFIG_SECURE_BOOT_V2_ENABLED=
CONFIG_SECURE_BOOT_BUILD_SIGNED_BINARIES=
CONFIG_SECURE_FLASH_ENC_ENABLED=
CONFIG_SECURE_FLASH_ENCRYPTION_MODE_DEVELOPMENT=y
CONFIG_SECURE_FLASH_ENCRYPTION_MODE_RELEASE=
CONFIG_SECURE_DISABLE_ROM_DL_MODE=
CONFIG_SECURE_INSECURE_ALLOW_DL_MODE=y

#
# ESP32-specific - Enterprise Crypto Development
#
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y
CONFIG_ESP32_DEFAULT_CPU_FREQ_MHZ=240
CONFIG_ESP32_SPIRAM_SUPPORT=
CONFIG_ESP32_MEMMAP_TRACEMEM=
CONFIG_ESP32_ULP_COPROC_ENABLED=
CONFIG_ESP32_DISABLE_BASIC_ROM_CONSOLE=
CONFIG_ESP32_COMPATIBLE_PRE_V2_1_BOOTLOADERS=
CONFIG_ESP32_USE_FIXED_STATIC_RAM_SIZE=

#
# Hardware crypto acceleration - Enterprise
#
CONFIG_ESP32_CRYPTO_AES_HW=y
CONFIG_ESP32_CRYPTO_SHA_HW=y
CONFIG_ESP32_CRYPTO_RSA_HW=y
CONFIG_ESP32_CRYPTO_ECDSA_HW=y
CONFIG_ESP32_HARDWARE_AES=y
CONFIG_ESP32_HARDWARE_SHA=y
CONFIG_ESP32_HARDWARE_RSA=y

#
# ESP System Settings - Development
#
CONFIG_ESP_SYSTEM_EVENT_QUEUE_SIZE=32
CONFIG_ESP_SYSTEM_EVENT_TASK_STACK_SIZE=2304
CONFIG_ESP_MAIN_TASK_STACK_SIZE=4096
CONFIG_ESP_MAIN_TASK_AFFINITY_CPU0=y
CONFIG_ESP_MAIN_TASK_AFFINITY=0x0
CONFIG_ESP_MINIMAL_SHARED_STACK_SIZE=2048
CONFIG_ESP_CONSOLE_UART_DEFAULT=y
CONFIG_ESP_CONSOLE_UART=y
CONFIG_ESP_CONSOLE_UART_NUM=0
CONFIG_ESP_CONSOLE_UART_BAUDRATE=115200
CONFIG_ESP_INT_WDT=y
CONFIG_ESP_INT_WDT_TIMEOUT_MS=300
CONFIG_ESP_INT_WDT_CHECK_CPU1=y
CONFIG_ESP_TASK_WDT_EN=y
CONFIG_ESP_TASK_WDT_INIT=y
CONFIG_ESP_TASK_WDT_TIMEOUT_S=10
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU0=y
CONFIG_ESP_TASK_WDT_CHECK_IDLE_TASK_CPU1=y
CONFIG_ESP_PANIC_HANDLER_REBOOT=
CONFIG_ESP_SYSTEM_PANIC_PRINT_HALT=y
CONFIG_ESP_SYSTEM_PANIC_PRINT_REBOOT=
CONFIG_ESP_SYSTEM_PANIC_SILENT_REBOOT=
CONFIG_ESP_SYSTEM_PANIC_GDBSTUB=
CONFIG_ESP_SYSTEM_GDBSTUB_RUNTIME=y

#
# SecureIoT-VIF Enterprise Development Configuration
#
CONFIG_SECUREIOT_VIF_ENTERPRISE=y
CONFIG_SECUREIOT_VIF_VERSION="2.0.0-Enterprise-Dev"
CONFIG_SECUREIOT_VIF_DEBUG=y

# Integrity Verification - Development
CONFIG_INTEGRITY_VERIFICATION_ENABLED=y
CONFIG_INTEGRITY_REALTIME_CHECK=y
CONFIG_INTEGRITY_CHECK_INTERVAL_MS=120000
CONFIG_INTEGRITY_CHUNK_SIZE=2048
CONFIG_INTEGRITY_MAX_CHUNKS=256
CONFIG_INTEGRITY_USE_HSM=y
CONFIG_INTEGRITY_PREDICTIVE_CHECK=y
CONFIG_INTEGRITY_DEBUG=y

# Attestation - Development
CONFIG_ATTESTATION_ENABLED=y
CONFIG_ATTESTATION_CONTINUOUS=y
CONFIG_ATTESTATION_INTERVAL_MS=60000
CONFIG_ATTESTATION_AUTONOMOUS=y
CONFIG_ATTESTATION_HSM_SIGNING=y
CONFIG_ATTESTATION_DEBUG=y

# Security Monitor - Development
CONFIG_SECURITY_MONITOR_ENABLED=y
CONFIG_SECURITY_MONITOR_ML_ENABLED=y
CONFIG_SECURITY_MONITOR_LEARNING_RATE=0.2
CONFIG_SECURITY_MONITOR_TAMPER_DETECTION=y
CONFIG_SECURITY_MONITOR_ANOMALY_THRESHOLD=5.0
CONFIG_SECURITY_MONITOR_DEBUG=y

# Crypto Operations - Development
CONFIG_CRYPTO_ESP32_HSM=y
CONFIG_CRYPTO_USE_HARDWARE=y
CONFIG_CRYPTO_EFUSE_KEYS=
CONFIG_CRYPTO_KEY_SLOTS=4
CONFIG_CRYPTO_TRNG_ENABLED=y
CONFIG_CRYPTO_DEBUG=y

# Sensor Interface - Development
CONFIG_SENSOR_INTERFACE_ENABLED=y
CONFIG_SENSOR_DHT22_GPIO=4
CONFIG_SENSOR_VALIDATION_HSM=y
CONFIG_SENSOR_ML_ANALYSIS=y
CONFIG_SENSOR_DEBUG=y

# Power Management - Development
CONFIG_PM_ENABLE=
CONFIG_PM_POWER_DOWN_CPU_IN_LIGHT_SLEEP=
CONFIG_PM_DFS_INIT_AUTO=

#
# Logging - Development Debug
#
CONFIG_LOG_DEFAULT_LEVEL_DEBUG=y
CONFIG_LOG_DEFAULT_LEVEL=4
CONFIG_LOG_MAXIMUM_EQUALS_DEFAULT=
CONFIG_LOG_MAXIMUM_LEVEL=5
CONFIG_LOG_COLORS=y
CONFIG_LOG_TIMESTAMP=y

#
# FreeRTOS - Development
#
CONFIG_FREERTOS_UNICORE=
CONFIG_FREERTOS_NO_AFFINITY=0x7FFFFFFF
CONFIG_FREERTOS_CORETIMER_0=y
CONFIG_FREERTOS_HZ=1000
CONFIG_FREERTOS_ASSERT_ON_UNTESTED_FUNCTION=y
CONFIG_FREERTOS_ASSERT_FAIL_ABORT=
CONFIG_FREERTOS_ASSERT_FAIL_PRINT_CONTINUE=y
CONFIG_FREERTOS_ASSERT_DISABLE=
CONFIG_FREERTOS_IDLE_TASK_STACKSIZE=2048
CONFIG_FREERTOS_ISR_STACKSIZE=2048
CONFIG_FREERTOS_LEGACY_HOOKS=
CONFIG_FREERTOS_MAX_TASK_NAME_LEN=16
CONFIG_FREERTOS_SUPPORT_PTHREAD=y
CONFIG_FREERTOS_ENABLE_TASK_SNAPSHOT=y
CONFIG_FREERTOS_PLACE_FUNCTIONS_INTO_FLASH=
CONFIG_FREERTOS_DEBUG_INTERNALS=y
CONFIG_FREERTOS_TASK_FUNCTION_WRAPPER=y
CONFIG_FREERTOS_CHECK_STACKOVERFLOW_CANARY=y
CONFIG_FREERTOS_THREAD_LOCAL_STORAGE_POINTERS=1
CONFIG_FREERTOS_IDLE_TIME_BEFORE_SLEEP=3
CONFIG_FREERTOS_USE_TICKLESS_IDLE=

#
# Heap memory debugging - Development
#
CONFIG_HEAP_POISONING_DISABLED=
CONFIG_HEAP_POISONING_LIGHT=y
CONFIG_HEAP_POISONING_COMPREHENSIVE=
CONFIG_HEAP_TRACING_OFF=
CONFIG_HEAP_TRACING_STANDALONE=y
CONFIG_HEAP_TRACING_TOHOST=
CONFIG_HEAP_ABORT_WHEN_ALLOCATION_FAILS=

#
# mbedTLS - Development
#
CONFIG_MBEDTLS_INTERNAL_MEM_ALLOC=y
CONFIG_MBEDTLS_DEFAULT_MEM_ALLOC=
CONFIG_MBEDTLS_CUSTOM_MEM_ALLOC=
CONFIG_MBEDTLS_ASYMMETRIC_CONTENT_LEN=y
CONFIG_MBEDTLS_SSL_IN_CONTENT_LEN=16384
CONFIG_MBEDTLS_SSL_OUT_CONTENT_LEN=4096
CONFIG_MBEDTLS_DYNAMIC_BUFFER=y
CONFIG_MBEDTLS_DEBUG=y
CONFIG_MBEDTLS_HARDWARE_AES=y
CONFIG_MBEDTLS_HARDWARE_MPI=y
CONFIG_MBEDTLS_HARDWARE_SHA=y
CONFIG_MBEDTLS_HAVE_TIME=y
CONFIG_MBEDTLS_HAVE_TIME_DATE=
CONFIG_MBEDTLS_ECDSA_DETERMINISTIC=y
CONFIG_MBEDTLS_SHA512_C=y
CONFIG_MBEDTLS_TLS_ENABLED=y
CONFIG_MBEDTLS_AES_C=y
CONFIG_MBEDTLS_CCM_C=y
CONFIG_MBEDTLS_GCM_C=y
CONFIG_MBEDTLS_PEM_PARSE_C=y
CONFIG_MBEDTLS_PEM_WRITE_C=y
CONFIG_MBEDTLS_X509_CRL_PARSE_C=y
CONFIG_MBEDTLS_X509_CSR_PARSE_C=y
CONFIG_MBEDTLS_ECP_C=y
CONFIG_MBEDTLS_ECDH_C=y
CONFIG_MBEDTLS_ECDSA_C=y
CONFIG_MBEDTLS_ECP_DP_SECP256R1_ENABLED=y
CONFIG_MBEDTLS_ECP_DP_SECP384R1_ENABLED=y
CONFIG_MBEDTLS_ECP_DP_SECP521R1_ENABLED=y

#
# SPI Flash driver - Development
#
CONFIG_SPI_FLASH_VERIFY_WRITE=y
CONFIG_SPI_FLASH_ENABLE_COUNTERS=y
CONFIG_SPI_FLASH_ROM_DRIVER_PATCH=y
CONFIG_SPI_FLASH_DANGEROUS_WRITE_ABORTS=
CONFIG_SPI_FLASH_DANGEROUS_WRITE_FAILS=y
CONFIG_SPI_FLASH_DANGEROUS_WRITE_ALLOWED=

#
# UART configuration
#
CONFIG_UART_ISR_IN_IRAM=y

# End of configuration