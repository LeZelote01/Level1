# Configuration de gestion d'énergie avancée pour SecureIoT-VIF Enterprise
# Optimisations énergétiques pour déploiement autonome

#
# Power Management Enterprise
#
CONFIG_PM_ENABLE=y
CONFIG_PM_POWER_DOWN_CPU_IN_LIGHT_SLEEP=y
CONFIG_PM_POWER_DOWN_TAGMEM_IN_LIGHT_SLEEP=y
CONFIG_PM_TRACE=y
CONFIG_PM_PROFILING=y
CONFIG_PM_DFS_INIT_AUTO=y
CONFIG_PM_USE_RTC_TIMER_REF=y
CONFIG_PM_DISABLE_INT_WAKEUP=

#
# Dynamic Frequency Scaling (DFS)
#
CONFIG_PM_DFS_ENABLED=y
CONFIG_PM_DFS_INIT_AUTO=y
CONFIG_PM_DFS_MAX_FREQ_80M=
CONFIG_PM_DFS_MAX_FREQ_160M=
CONFIG_PM_DFS_MAX_FREQ_240M=y

#
# Sleep Modes Configuration
#
CONFIG_ESP32_DEEP_SLEEP_WAKEUP_DELAY=2000
CONFIG_ESP32_XTAL_FREQ_40=y
CONFIG_ESP32_XTAL_FREQ_26=
CONFIG_ESP32_XTAL_FREQ_AUTO=
CONFIG_ESP32_XTAL_FREQ=40

#
# RTC Clock Configuration
#
CONFIG_ESP32_RTC_CLK_SRC_INT_RC=y
CONFIG_ESP32_RTC_CLK_SRC_EXT_CRYS=
CONFIG_ESP32_RTC_CLK_SRC_EXT_OSC=
CONFIG_ESP32_RTC_CLK_SRC_INT_8MD256=
CONFIG_ESP32_RTC_CLK_CAL_CYCLES=3000
CONFIG_ESP32_DEEP_SLEEP_WAKEUP_DELAY=2000

#
# Ultra Low Power (ULP) Coprocessor
#
CONFIG_ESP32_ULP_COPROC_ENABLED=y
CONFIG_ESP32_ULP_COPROC_RESERVE_MEM=8192
CONFIG_ESP32_ULP_COPROC_RISCV=
CONFIG_ESP32_ULP_COPROC_FSM=y

#
# SecureIoT-VIF Power Management Enterprise
#
CONFIG_SECUREIOT_VIF_POWER_MANAGEMENT=y
CONFIG_SECUREIOT_VIF_ADAPTIVE_POWER=y
CONFIG_SECUREIOT_VIF_POWER_PROFILES=y

# Power Profiles
CONFIG_POWER_PROFILE_PERFORMANCE=
CONFIG_POWER_PROFILE_BALANCED=y
CONFIG_POWER_PROFILE_ECONOMY=
CONFIG_POWER_PROFILE_ULTRA_LOW=

# Adaptive Power Features
CONFIG_ADAPTIVE_CPU_FREQ=y
CONFIG_ADAPTIVE_SLEEP_MODE=y
CONFIG_ADAPTIVE_PERIPHERALS=y
CONFIG_ADAPTIVE_CRYPTO_POWER=y

# Power Thresholds
CONFIG_BATTERY_CRITICAL_THRESHOLD=10
CONFIG_BATTERY_LOW_THRESHOLD=20
CONFIG_BATTERY_NORMAL_THRESHOLD=50

# Sleep Configuration
CONFIG_LIGHT_SLEEP_TIMEOUT_MS=1000
CONFIG_DEEP_SLEEP_TIMEOUT_MS=300000
CONFIG_WAKEUP_GPIO=GPIO_NUM_0
CONFIG_WAKEUP_TIMER_ENABLED=y

# Peripheral Power Management
CONFIG_PERIPHERAL_AUTO_DISABLE=y
CONFIG_UART_POWER_DOWN=y
CONFIG_SPI_POWER_DOWN=y
CONFIG_I2C_POWER_DOWN=y
CONFIG_GPIO_POWER_DOWN=y

# Crypto Power Management
CONFIG_CRYPTO_POWER_GATING=y
CONFIG_HSM_STANDBY_MODE=y
CONFIG_EFUSE_POWER_OPTIMIZATION=y

# Sensor Power Management
CONFIG_SENSOR_POWER_CONTROL=y
CONFIG_SENSOR_SLEEP_BETWEEN_READS=y
CONFIG_SENSOR_POWER_GPIO=5

# Monitoring Power Consumption
CONFIG_POWER_MONITORING=y
CONFIG_CURRENT_MEASUREMENT=y
CONFIG_VOLTAGE_MONITORING=y
CONFIG_POWER_STATISTICS=y

#
# ESP32 Power Management Hardware
#
CONFIG_ESP32_BROWNOUT_DET=y
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_0=y
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_1=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_2=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_3=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_4=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_5=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_6=
CONFIG_ESP32_BROWNOUT_DET_LVL_SEL_7=
CONFIG_ESP32_BROWNOUT_DET_LVL=0

#
# Clock Configuration for Power Optimization
#
CONFIG_ESP32_XTAL_FREQ_40=y
CONFIG_ESP32_XTAL_FREQ=40
CONFIG_ESP32_DEFAULT_CPU_FREQ_80=
CONFIG_ESP32_DEFAULT_CPU_FREQ_160=
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y
CONFIG_ESP32_DEFAULT_CPU_FREQ_MHZ=240

#
# Advanced Power Features
#
CONFIG_ESP32_TIME_SYSCALL_USE_RTC_FRC1=y
CONFIG_ESP32_TIME_SYSCALL_USE_RTC=
CONFIG_ESP32_TIME_SYSCALL_USE_FRC1=
CONFIG_ESP32_TIME_SYSCALL_USE_NONE=
CONFIG_ESP32_RTC_CLOCK_SOURCE_INTERNAL_RC=y
CONFIG_ESP32_RTC_CLOCK_SOURCE_EXTERNAL_CRYSTAL=
CONFIG_ESP32_RTC_CLOCK_SOURCE_EXTERNAL_OSC=
CONFIG_ESP32_RTC_CLOCK_SOURCE_INTERNAL_8MD256=

#
# FreeRTOS Tickless Idle for Power Saving
#
CONFIG_FREERTOS_USE_TICKLESS_IDLE=y
CONFIG_FREERTOS_IDLE_TIME_BEFORE_SLEEP=3

#
# Component Power Settings
#
CONFIG_LWIP_USE_ESP_TIME=y

# End of Power Management Configuration